# Tutorial 1: Analyzing your first electrophysiology experiment with NDI

## 1.1: Reading an example dataset

We will start with learning to read an example dataset into NDI. These data are available in a folder here. You can put the folder anywhere, but
we will assume that you put them in your MATLAB folder. 

### 1.1.1 Introduction to the experiment

These data are single neuron recordings made with electrodes in the anesthetized tree shrew visual as a part of
[Van Hooser et al. 2013](https://pubmed.ncbi.nlm.nih.gov/23843520/). This
example data is a very small subset of the original data for the purposes of illustration.

INSERT IMAGE HERE

In this experiment, a single unit recording electrode was inserted into either lateral geniculate nucleus or V1. The electrode was connected to 
an amplifier, and the output signal was recorded by a Cambridge Electronic Design (CED) micro1401 digital acquisition board. A CED Spike2 software
script was used that stored 1 recording epoch per folder. In software, the voltage from the electrode was assigned to channel 11. A visual stimulus
monitor was set up in front of the animal, and visual stimuli were 
generated by custom software running on a separate computer. A record of the stimulus parameters was stored in the epoch folder in a file called
`stims.mat`, and stimulus timing information was delievered to the digital inputs of the micro1401 in the form of a stimulus onset trigger and
an 8-bit stimulus code signal that were generated by the stimulus computer.

### 1.1.2 Introduction to the data

The data are in a folder called `ts_exper1`. It contains recordings of two neurons, an LGN neuron and a V1 neuron, to presentation of sinusoidal 
gratings that either vary in orientation or in spatial frequency. The data as provided by the host lab are organized into subfolders, named `t00001`, `t00002`, `t00003`, and `t00004`. The first two folders are recordings of the LGN neuron, and the second two folders are recordings of the V1 neuron. Each `t0000N` folder has 3 files:

- `probemap.txt` - a file that we made for NDI that describe what probes are recorded in this folder
- `spike2data.smr` - a CED Spike2 file that has the raw electrophysiology data and the stimulus timing information
- `stims.mat` - A Matlab file that has detailed parameters of the stimuli that were run

First, let's list these files using the `ls` command and take a quick look at what is in them. Set up the "prefix" path to your data as necessary. (Here, we assume you put the `ts_exper1` folder into your Matlab `userpath` folder but you can put it anywhere.

#### Code block 1.1.2.1. Type this in to Matlab:

```matlab
prefix = [userpath filesep]; % or '/Users/yourusername/Desktop/' if you put it on the desktop perhaps
ls([prefix 'ts_exper1' filesep 't*']); % list all the files in the t0000N folders
```

We wrote a short function so that you can see the raw voltage recording and the stimulus timing information. Each stimulus appears as a number and its duration is indicated by the black bar. You can pan with the mouse to scroll through the recording.

#### Code block 1.1.2.2. Type this in to Matlab:

```matlab
ndi.example.tutorial.plottreeshrewdata(fullfile(prefix,'ts_exper1','t00001','spike2data.smr'));
```

You should see a Matlab window that looks like this, and when you hover your mouse over the image, it should turn into a "hand" that allows you to drag and pan around.

INSERT IMAGE HERE


### 1.1.3 Specifying the metadata that NDI needs to read the experiment





